<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Doppelansicht – Clean (responsive Vollbild-Abfrage)</title>
  <style>
    :root {
      --bg: #000;
      --fg: #fff;
      --gap: 0px;
      --header1-crop: 80px;
      --header2-crop: 80px;
      --radius: 0px;
      --fs-h1: clamp(18px, 3.2vw, 28px);
      --fs-p: clamp(13px, 2.2vw, 16px);
      --fs-btn: clamp(13px, 2.3vw, 16px);
      --pad: clamp(14px, 3.5vw, 24px);
      --btn-pad-y: clamp(10px, 2.2vw, 14px);
      --btn-pad-x: clamp(12px, 3vw, 18px);
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0; height: 100%;
      background: var(--bg); color: var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow: hidden;
    }
    .layout {
      position: fixed; inset: 0;
      display: grid; gap: var(--gap);
      grid-template-rows: 1fr 1fr;
    }
    .pane { position: relative; overflow: hidden; border-radius: var(--radius); background: #111; }
    .frame {
      position: absolute; inset: 0;
      width: 100%; height: calc(100% + 300px);
      border: 0; transform: translateY(0); will-change: transform; background: #111;
    }
    .pane1 .frame { transform: translateY(calc(-1 * var(--header1-crop))); }
    .pane2 .frame { transform: translateY(calc(-1 * var(--header2-crop))); }

    /* Responsive Vollbild-Overlay */
    .overlay {
      position: fixed; inset: 0; z-index: 10;
      display: flex; align-items: center; justify-content: center; flex-direction: column; gap: calc(var(--pad) * 0.7);
      padding: calc(var(--pad) + env(safe-area-inset-top)) calc(var(--pad) + env(safe-area-inset-right))
               calc(var(--pad) + env(safe-area-inset-bottom)) calc(var(--pad) + env(safe-area-inset-left));
      background: radial-gradient(1200px 600px at 50% -20%, rgba(255,255,255,.08), rgba(0,0,0,.92));
      color: #fff; text-align: center;
    }
    .overlay h1 { margin: 0; font-size: var(--fs-h1); font-weight: 700; }
    .overlay p { margin: 0; opacity: .85; font-size: var(--fs-p); }
    .btn {
      appearance: none; border: 0; border-radius: 12px;
      padding: var(--btn-pad-y) var(--btn-pad-x);
      background: rgba(255,255,255,.14); color: #fff; cursor: pointer; font-size: var(--fs-btn);
      min-width: 11ch;
      touch-action: manipulation;
    }
    .btn:focus-visible { outline: 2px solid rgba(255,255,255,.6); outline-offset: 2px; }
    .muted { font-size: clamp(11px, 2vw, 13px); opacity: .7; display: block; margin-top: -6px; }
    .hidden { display: none !important; }

    @media (max-height: 480px) {
      .overlay { gap: calc(var(--pad) * 0.4); }
      .muted { display: none; }
    }

    @media (prefers-reduced-motion: reduce) {
      .overlay { background: rgba(0,0,0,.9); }
    }
  </style>
</head>
<body>
  <main class="layout">
    <section class="pane pane1">
      <iframe id="frame1" class="frame" title="Ansicht 1"></iframe>
    </section>
    <section class="pane pane2">
      <iframe id="frame2" class="frame" title="Ansicht 2"></iframe>
    </section>
  </main>

  <!-- Responsives Vollbild-Overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Anzeige starten">
    <h1>Anzeige starten</h1>
    <p>Für eine saubere Darstellung bitte im <strong>Vollbild</strong> starten.</p>
    <div>
      <button class="btn" id="startFs">Vollbild starten</button>
      <span class="muted">oder F11 drücken</span>
    </div>
    <button class="btn" id="skip">Ohne Vollbild fortfahren</button>
  </div>

  <script>
    const URL_1 = "https://belegung.org/cgi-bin/belegung.pl?qr=52!1!296!";
    const URL_2 = "https://belegung.org/cgi-bin/belegung.pl?qr=52!2!296!";
    const RELOAD_EVERY_MS = 60 * 60 * 1000;

    function withCacheBuster(url) {
      const t = Date.now();
      const sep = url.includes('?') ? '&' : '?';
      return `${url}${sep}_=${t}`;
    }

    function setVh() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    setVh(); window.addEventListener('resize', setVh);

    const f1 = document.getElementById('frame1');
    const f2 = document.getElementById('frame2');
    function loadAll(){
      f1.src = withCacheBuster(URL_1);
      f2.src = withCacheBuster(URL_2);
    }
    loadAll();
    setInterval(loadAll, RELOAD_EVERY_MS);

    const overlay = document.getElementById('overlay');
    const startFs = document.getElementById('startFs');
    const skip = document.getElementById('skip');

    async function enterFullscreen() {
      try {
        await document.documentElement.requestFullscreen();
      } catch(e) { }
      overlay.classList.add('hidden');
      sessionStorage.setItem('fs_ack', '1');
    }
    startFs.addEventListener('click', enterFullscreen);
    skip.addEventListener('click', () => {
      overlay.classList.add('hidden');
      sessionStorage.setItem('fs_ack', '1');
    });
    document.addEventListener('keydown', (ev) => {
      if (ev.key === 'Escape' && !document.fullscreenElement) {
        overlay.classList.add('hidden');
        sessionStorage.setItem('fs_ack', '1');
      }
    });
    if (sessionStorage.getItem('fs_ack') === '1' || document.fullscreenElement) {
      overlay.classList.add('hidden');
    }
    document.addEventListener('fullscreenchange', () => {
      if (document.fullscreenElement) overlay.classList.add('hidden');
    });
    console.log('Hinweis: Wenn eine Zielseite das Einbetten verbietet (X-Frame-Options/CSP), muss sie es erlauben.');
  </script>
</body>
</html>
