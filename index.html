<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hauptdisplay – 4-Fenster (Spielplan + UL/OR/UR)</title>
  <style>
    :root { --gap: 8px; --bg:#000; --fg:#fff; --radius:12px; --topbar:48px; }
    * { box-sizing: border-box; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; overflow:hidden; }
    .topbar { position:fixed; inset:0 0 auto 0; height:var(--topbar);
      display:flex; align-items:center; justify-content:space-between; gap:10px; padding:0 14px;
      background:rgba(0,0,0,.75); border-bottom:1px solid rgba(255,255,255,.08); z-index:10; }
    .weekday { font-weight:700; }
    .actions { display:flex; gap:8px; align-items:center; }
    .btn { appearance:none; border:0; border-radius:10px; padding:6px 10px;
      background:rgba(255,255,255,.12); color:var(--fg); cursor:pointer; font-size:12px }
    .grid { position: fixed; inset: var(--topbar) 0 0 0; padding: var(--gap);
      display:grid; gap: var(--gap); grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
    .pane { position:relative; overflow:hidden; border-radius:var(--radius); background:#111; outline:1px solid rgba(255,255,255,.08) }
    .label { position:absolute; left:10px; top:10px; z-index:2; font-size:11px; opacity:.75;
      background:rgba(0,0,0,.45); padding:4px 8px; border-radius:8px }
    iframe { position:absolute; inset:0; width:100%; height:100%; border:0; background:#111 }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="weekday" id="weekday">–</div>
    <div class="actions">
      <button class="btn" id="reload">Neu laden</button>
      <button class="btn" id="fullscreen">Vollbild</button>
    </div>
  </div>
  <div class="grid">
    <section class="pane">
      <div class="label">Links oben – Spielplan</div>
      <iframe id="tl"></iframe>
    </section>
    <section class="pane">
      <div class="label">Rechts oben – OR</div>
      <iframe id="tr"></iframe>
    </section>
    <section class="pane">
      <div class="label">Links unten – UL</div>
      <iframe id="bl"></iframe>
    </section>
    <section class="pane">
      <div class="label">Rechts unten – UR</div>
      <iframe id="br"></iframe>
    </section>
  </div>
  <script>
    // Quellen
    const TL_URL = "https://belegung.org/cgi-bin/preview20.pl?pbid=52"; // Spielplan
    const TR_URL = "https://fc09jugendfussball.github.io/display-or/";
    const BL_URL = "https://fc09jugendfussball.github.io/display-ul/";
    const BR_URL = "https://fc09jugendfussball.github.io/display-ur/";
    const RELOAD_HOURLY_MS = 60*60*1000;

    function withCB(u) { return u + (u.includes("?") ? "&" : "?") + "_=" + Date.now(); }
    function setWeekdayGerman(el){
      const f = new Intl.DateTimeFormat('de-DE', {weekday:'long'});
      const d = f.format(new Date());
      el.textContent = d.charAt(0).toUpperCase() + d.slice(1);
    }
    function loadAll(){
      document.getElementById("tl").src = withCB(TL_URL);
      document.getElementById("tr").src = withCB(TR_URL);
      document.getElementById("bl").src = withCB(BL_URL);
      document.getElementById("br").src = withCB(BR_URL);
    }
    setWeekdayGerman(document.getElementById('weekday'));
    setInterval(()=>setWeekdayGerman(document.getElementById('weekday')), 60_000);
    loadAll();
    setInterval(loadAll, RELOAD_HOURLY_MS);

    document.getElementById('reload').addEventListener('click', loadAll);
    document.getElementById('fullscreen').addEventListener('click', ()=>{
      const root = document.documentElement;
      if (!document.fullscreenElement) root.requestFullscreen?.(); else document.exitFullscreen?.();
    });

    console.log("Hinweis: Falls eine eingebettete Quelle Iframes blockt (X-Frame-Options/CSP), muss das serverseitig erlaubt sein.");
  </script>
</body>
</html>
